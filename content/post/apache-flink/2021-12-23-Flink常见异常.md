---
layout:     post 
slug:      "flink-exception-qa"
title:      "Flink常见异常"
subtitle:   ""
description: ""
date:       2021-12-23
author:     "梁远鹏"
image: "https://res.cloudinary.com/lyp/image/upload/v1612709780/hugo/blog.github.io/pexels-matt-hardy-2568001.jpg"
published: true
tags:
    - flink 
categories: [ TECH ]
---    

# 声明  

由于我不是Flink专家,因此只是将使用/研究Flink时遇到的问题分享出来,如有不对之处麻烦提示或帮忙纠正一下,感谢!

# 常见异常  

## This type (GenericType<java.util.Map>) cannot be used as key.  

基本上是说在你的数据处理过程中把map或含有map类型字段的对象作为了key或key的一部分.  

例如:  

```java
...
DataSet<Tuple2<TdbBaseMto, Integer>> counts =
                text.flatMap(new Tokenizer())
                        .groupBy(0)
                        .sum(1);  

...

public class TdbBaseMto {
    ...
    public Map tags = Collections.emptyMap();
}
```  

上述代码块中`TdbBaseMto`对象就存在了map类型的字段,因此发生了这个错误.  

## This type (GenericType) cannot be used as key.  

可能是你的key对象没有默认的无参public构造函数,或者是字段没有声明为public.

## The TaskExecutor is shutting down.

本地起了完整的Flink Runtime,然后跑了几个批处理的demo,但是批处理完成后总是会报出这个异常.  

具体原因还未知.  


## The module flink-runtime-web could not be found in the class path. Please add this jar in order to enable web based job submission.

提示很明确了,缺少了`flink-runtime-web`的依赖包,把下面`${flink.version}`改成自己需要的版本就可以了.  

```xml
<dependency>
      <groupId>org.apache.flink</groupId>
      <artifactId>flink-runtime-web_2.12</artifactId>
      <version>${flink.version}</version>
    </dependency>
```

# 温馨提示 

本文持续更新
---
layout:     post 
slug:      "flink-exception-qa"
title:      "Flink常见异常"
subtitle:   ""
description: ""
date:       2021-12-23
author:     "梁远鹏"
image: "https://res.cloudinary.com/lyp/image/upload/v1612709780/hugo/blog.github.io/pexels-matt-hardy-2568001.jpg"
published: true
tags:
    - flink 
categories: [ TECH ]
---    

# 声明  

由于我不是Flink专家,因此只是将使用/研究Flink时遇到的问题分享出来,如有不对之处麻烦提示或帮忙纠正一下,感谢!

# 常见异常  

## This type (GenericType<java.util.Map>) cannot be used as key.  

基本上是说在你的数据处理过程中把map或含有map类型字段的对象作为了key或key的一部分.  

例如:  

```java
...
DataSet<Tuple2<TdbBaseMto, Integer>> counts =
                text.flatMap(new Tokenizer())
                        .groupBy(0)
                        .sum(1);  

...

public class TdbBaseMto {
    ...
    public Map tags = Collections.emptyMap();
}
```  

上述代码块中`TdbBaseMto`对象就存在了map类型的字段,因此发生了这个错误.  

## This type (GenericType) cannot be used as key.  

可能是你的key对象没有默认的无参public构造函数,或者是字段没有声明为public.

# 温馨提示 

本文持续更新